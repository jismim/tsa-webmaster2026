<!DOCTYPE html>
<html lang="en">
<head>
<<<<<<< Updated upstream
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareMap Morris - Community Resource Directory</title>
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
=======
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resource Directory ‚Äî CareMap Morris</title>
  <meta name="description" content="Browse and search Morris County nonprofit organizations and community services by category, location, and service type." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=DM+Sans:wght@300;400;500&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/directory.css" />
>>>>>>> Stashed changes
</head>
<body>
<<<<<<< Updated upstream
<<<<<<< Updated upstream
    

    <!-- link to JS -->
    <script src="js/script.js"></script>
=======
=======
>>>>>>> Stashed changes

  <a class="skip-link" href="#main">Skip to main content</a>

  <!-- Mobile Menu -->
  <nav class="mobile-menu" id="mobileMenu" aria-label="Mobile navigation" aria-hidden="true">
    <div class="mobile-menu-head">
      <span class="mobile-menu-brand">CareMap Morris</span>
      <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Close navigation">‚úï</button>
    </div>
    <a href="index.html">Home</a>
    <a href="directory.html">Directory</a>
    <a href="donate-volunteer.html">Donate &amp; Volunteer</a>
    <a href="submit.html">Submit a Resource</a>
    <a href="awareness.html">Awareness</a>
    <a href="events.html">Events</a>
  </nav>

  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html" aria-label="CareMap Morris ‚Äî Home">
        <span class="brand-mark" aria-hidden="true"></span>
        <span class="brand-text">CareMap Morris</span>
      </a>
      <nav class="primary-nav" aria-label="Primary navigation">
        <a href="index.html">Home</a>
        <a href="directory.html" aria-current="page" style="color:var(--cream)">Directory</a>
        <a href="donate-volunteer.html">Donate &amp; Volunteer</a>
        <a href="submit.html">Submit a Resource</a>
        <a href="awareness.html">Awareness</a>
        <a href="events.html">Events</a>
      </nav>
      <button class="mobile-nav-btn" id="mobileNavBtn" aria-label="Open navigation" aria-expanded="false">
        ‚ò∞ Menu
      </button>
    </div>
  </header>

  <!-- PAGE HERO -->
  <div style="background:var(--ink);padding:2rem 0 1.75rem;border-bottom:3px solid var(--rust)">
    <div class="container" style="display:flex;align-items:flex-end;justify-content:space-between;gap:1rem;flex-wrap:wrap">
      <div>
        <p style="font-family:var(--ff-mono);font-size:.68rem;letter-spacing:.14em;text-transform:uppercase;color:var(--rust);margin-bottom:.5rem;display:flex;align-items:center;gap:.4rem">
          <span style="display:block;width:20px;height:2px;background:var(--rust)"></span>
          Resource Directory
        </p>
        <h1 style="font-family:var(--ff-display);font-size:clamp(1.6rem,3vw,2.5rem);font-weight:900;color:var(--cream);line-height:1.15;letter-spacing:-.02em">
          Find Help in Morris County
        </h1>
        <p style="color:rgba(247,242,234,.55);font-size:.9rem;margin-top:.4rem;max-width:500px">
          50 verified organizations across food, housing, health, legal aid, and more.
        </p>
      </div>
      <a href="submit.html" class="btn btn-ghost" style="border-color:rgba(247,242,234,.2);color:rgba(247,242,234,.7);flex-shrink:0">
        + Submit a Resource
      </a>
    </div>
  </div>

  <main id="main">
    <div class="dir-layout">

      <!-- ==================== SIDEBAR FILTERS ==================== -->
      <aside class="dir-sidebar" aria-label="Filter resources">

        <!-- Search -->
        <div style="margin-bottom:1.25rem">
          <p class="filter-group-title">Search</p>
          <div class="sidebar-search">
            <input
              id="dirSearch"
              type="search"
              placeholder='e.g. "food pantry", "shelter"‚Ä¶'
              autocomplete="off"
              aria-label="Search resources"
            />
            <button type="button" aria-label="Search">üîç</button>
          </div>
        </div>

        <!-- Active filters display -->
        <div class="active-filters" id="activeFilters" aria-live="polite"></div>

        <!-- Category filter -->
        <div class="filter-group">
          <p class="filter-group-title">Category</p>
          <div class="filter-pills" role="group" aria-label="Filter by category">
            <button class="filter-pill active" data-category="all">
              All Categories
              <span class="filter-pill-count">50</span>
            </button>
            <button class="filter-pill" data-category="food">
              ü•´ Food &amp; Nutrition
              <span class="filter-pill-count">8</span>
            </button>
            <button class="filter-pill" data-category="housing">
              üè† Housing &amp; Shelter
              <span class="filter-pill-count">7</span>
            </button>
            <button class="filter-pill" data-category="domestic-violence">
              üõ° Domestic Violence
              <span class="filter-pill-count">2</span>
            </button>
            <button class="filter-pill" data-category="mental-health">
              üß† Mental Health
              <span class="filter-pill-count">3</span>
            </button>
            <button class="filter-pill" data-category="substance-use">
              üíä Substance Use
              <span class="filter-pill-count">3</span>
            </button>
            <button class="filter-pill" data-category="health">
              ‚ù§Ô∏è Health Care
              <span class="filter-pill-count">4</span>
            </button>
            <button class="filter-pill" data-category="legal">
              ‚öñÔ∏è Legal Services
              <span class="filter-pill-count">3</span>
            </button>
            <button class="filter-pill" data-category="disability">
              ‚ôø Disability Services
              <span class="filter-pill-count">4</span>
            </button>
            <button class="filter-pill" data-category="youth">
              üßí Youth &amp; Children
              <span class="filter-pill-count">5</span>
            </button>
            <button class="filter-pill" data-category="senior">
              üë¥ Senior Services
              <span class="filter-pill-count">1</span>
            </button>
            <button class="filter-pill" data-category="employment">
              üíº Employment
              <span class="filter-pill-count">1</span>
            </button>
            <button class="filter-pill" data-category="education">
              üìö Education &amp; ESL
              <span class="filter-pill-count">2</span>
            </button>
            <button class="filter-pill" data-category="social-services">
              ü§ù Social Services
              <span class="filter-pill-count">5</span>
            </button>
          </div>
        </div>

        <!-- Town filter -->
        <div class="filter-group">
          <p class="filter-group-title">Location (Town)</p>
          <select class="filter-select" id="townFilter" aria-label="Filter by town">
            <option value="All Towns">All Towns</option>
            <option value="Dover">Dover</option>
            <option value="Flanders">Flanders</option>
            <option value="Morristown">Morristown</option>
            <option value="Morris Plains">Morris Plains</option>
            <option value="Morris Township">Morris Township</option>
            <option value="Mount Olive">Mount Olive</option>
            <option value="Netcong">Netcong</option>
            <option value="Parsippany">Parsippany</option>
            <option value="Randolph">Randolph</option>
            <option value="Rockaway">Rockaway</option>
            <option value="Wharton">Wharton</option>
            <option value="Whippany">Whippany</option>
          </select>
        </div>

        <!-- Service type filter -->
        <div class="filter-group">
          <p class="filter-group-title">Services Provided</p>
          <select class="filter-select" id="serviceFilter" aria-label="Filter by service type">
            <option value="all">All Services</option>
            <option value="food">Food / Meals</option>
            <option value="housing">Housing / Shelter</option>
            <option value="emergency">Emergency Services</option>
            <option value="counseling">Counseling / Therapy</option>
            <option value="legal">Legal Aid</option>
            <option value="health">Health Care</option>
            <option value="employment">Employment</option>
            <option value="education">Education / ESL</option>
            <option value="disability">Disability Support</option>
            <option value="youth">Youth Programs</option>
            <option value="benefits-navigation">Benefits Navigation</option>
          </select>
        </div>

        <!-- Donate / Volunteer quick links -->
        <div class="filter-group">
          <p class="filter-group-title">Give Back</p>
          <div style="display:flex;flex-direction:column;gap:.4rem">
            <a href="donate-volunteer.html" class="filter-pill" style="text-decoration:none;display:flex;justify-content:space-between">
              üéÅ Donation Needs
            </a>
            <a href="donate-volunteer.html?tab=volunteer" class="filter-pill" style="text-decoration:none;display:flex;justify-content:space-between">
              üôã Volunteer Opportunities
            </a>
          </div>
        </div>

        <button class="clear-all-btn" id="clearAllFilters">Clear all filters</button>

      </aside>

      <!-- ==================== MAIN CONTENT ==================== -->
      <div class="dir-main">

        <!-- Sticky top bar -->
        <div class="dir-topbar" role="status" aria-live="polite">
          <p class="dir-result-count" id="resultCount">Loading resources‚Ä¶</p>
          <div class="dir-topbar-right">
            <select class="sort-select" id="sortFilter" aria-label="Sort resources">
              <option value="alpha">A‚ÄìZ</option>
              <option value="category">By Category</option>
              <option value="town">By Town</option>
            </select>
            <button class="view-btn active" id="viewGrid" aria-label="Grid view" title="Grid view">
              ‚äû Grid
            </button>
            <button class="view-btn" id="viewList" aria-label="List view" title="List view">
              ‚ò∞ List
            </button>
          </div>
        </div>

        <!-- Resource cards -->
        <div class="resource-grid-wrap">
          <div class="resource-grid" id="resourceGridWrap" aria-label="Resource listings">
            <!-- Populated by JS -->
          </div>
        </div>

      </div>
    </div>
  </main>

  <!-- ==================== HOVER CARD (tooltip) ==================== -->
  <div class="hover-card" id="hoverCard" aria-hidden="true"></div>

  <!-- ==================== DETAIL MODAL ==================== -->
  <div class="detail-backdrop" id="detailBackdrop" hidden aria-hidden="true"></div>
  <div class="detail-modal" id="detailModal" role="dialog" aria-modal="true" aria-label="Resource details" hidden>
    <div class="detail-card" id="detailContent">
      <!-- Populated by JS -->
    </div>
  </div>

  <!-- ==================== SAVE MODAL ==================== -->
  <div class="detail-backdrop save-modal-backdrop" id="saveBackdrop" hidden aria-hidden="true"></div>
  <div class="save-modal" id="saveModal" role="dialog" aria-modal="true" aria-labelledby="saveModalTitle" hidden>
    <div class="save-modal-card">
      <div class="save-modal-head">
        <h2 class="save-modal-title" id="saveModalTitle">üîñ Saved Resources</h2>
        <button class="save-modal-close" id="saveModalClose" aria-label="Close saved resources">‚úï</button>
      </div>
      <div class="save-modal-body">

        <div id="savedListEl">
          <!-- Populated by JS -->
        </div>

        <div style="margin-top:1.25rem">
          <p style="font-family:var(--ff-mono);font-size:.68rem;letter-spacing:.1em;text-transform:uppercase;color:var(--rust);margin-bottom:.6rem">
            Send to Email
          </p>
          <div class="email-row">
            <input
              class="email-input"
              id="emailInput"
              type="email"
              placeholder="your@email.com"
              autocomplete="email"
              aria-label="Email address to send saved resources"
            />
            <button class="btn btn-primary" id="sendEmailBtn" style="padding:.65rem 1rem;white-space:nowrap">
              Send ‚Üí
            </button>
          </div>
          <p class="email-send-note" id="emailNote">Your saved resources will be sent as a formatted list via your email client.</p>
        </div>

      </div>
    </div>
  </div>

  <!-- ==================== FLOATING SAVE BUTTON ==================== -->
  <div class="floating-saves" style="display:none" id="floatSavesWrap">
    <button class="floating-saves-btn" id="floatSavesBtn" aria-label="View saved resources">
      üîñ Saved
      <span class="save-count-badge" id="saveCountBadge">0</span>
    </button>
  </div>

  <!-- ==================== FOOTER ==================== -->
  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <p class="footer-brand"><span class="footer-brand-dot"></span> CareMap Morris</p>
        <p class="footer-mission">Connecting Morris County residents to trusted community resources and ways to give back.</p>
      </div>
      <div>
        <p class="footer-col-title">Navigation</p>
        <ul class="footer-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="directory.html">Directory</a></li>
          <li><a href="donate-volunteer.html">Donate &amp; Volunteer</a></li>
          <li><a href="submit.html">Submit a Resource</a></li>
          <li><a href="works-cited.html">Works Cited</a></li>
        </ul>
      </div>
      <div>
        <p class="footer-col-title">Emergency</p>
        <ul class="footer-links">
          <li><a href="tel:911">911 ‚Äî Emergency</a></li>
          <li><a href="tel:988">988 ‚Äî Mental Health Crisis</a></li>
          <li><a href="tel:18007997233">1-800-799-7233 ‚Äî DV Hotline</a></li>
        </ul>
      </div>
    </div>
    <div class="container footer-bottom">
      <p class="footer-disclaimer">
        <strong>Disclaimer:</strong> Resource information is gathered from public sources and may not reflect current hours or availability. Always confirm directly with the organization.
        <strong>This is not an emergency platform.</strong> Call <strong>911</strong> for immediate help.
      </p>
      <p class="footer-date" id="footerYear"></p>
    </div>
  </footer>

  <!-- Scripts: data first, then logic -->
  <script src="js/resources.js"></script>
  <script src="js/directory.js"></script>
  <script>
    // Mobile menu
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileNavBtn = document.getElementById('mobileNavBtn');
    const mobileMenuClose = document.getElementById('mobileMenuClose');
    mobileNavBtn.addEventListener('click', function() {
      mobileMenu.classList.add('open');
      mobileMenu.setAttribute('aria-hidden', 'false');
      mobileNavBtn.setAttribute('aria-expanded', 'true');
      document.body.style.overflow = 'hidden';
    });
    function closeMM() {
      mobileMenu.classList.remove('open');
      mobileMenu.setAttribute('aria-hidden', 'true');
      mobileNavBtn.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = '';
    }
    mobileMenuClose.addEventListener('click', closeMM);

    // Footer year
    document.getElementById('footerYear').textContent = '¬© ' + new Date().getFullYear() + ' CareMap Morris';

    // Show floating save btn wrapper once JS runs
    document.getElementById('floatSavesWrap').style.display = 'block';
  </script>
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
</body>
</html>